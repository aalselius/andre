/* Variables for letter objects */

var letterA = new letterObject('A a', 'a1.png', 'a2.png', 'a3.png', 'soundA1.m4a', 'soundA2.m4a', 'soundA3.m4a');
var letterB = new letterObject('B b', 'b1.png', 'b2.png', 'b3.png', 'soundB1.m4a', 'soundB2.m4a', 'soundB3.m4a');
var letterC = new letterObject('C c', 'c1.png', 'c2.png', 'c3.png', 'soundC1.m4a', 'soundC2.m4a', 'soundC3.m4a');
var letterD = new letterObject('D d', 'd1.png', 'd2.png', 'd3.png', 'soundD1.m4a', 'soundD2.m4a', 'soundD3.m4a');
var letterE = new letterObject('E e', 'e1.png', 'e2.png', 'e3.png', 'soundE1.m4a', 'soundE2.m4a', 'soundE3.m4a');
var letterF = new letterObject('F f', 'f1.png', 'f2.png', 'f3.png', 'soundF1.m4a', 'soundF2.m4a', 'soundF3.m4a');
var letterG = new letterObject('G g', 'g1.png', 'g2.png', 'g3.png', 'soundG1.m4a', 'soundG2.m4a', 'soundG3.m4a');
var letterH = new letterObject('H h', 'h1.png', 'h2.png', 'h3.png', 'soundH1.m4a', 'soundH2.m4a', 'soundH3.m4a');
var letterI = new letterObject('I i', 'i1.png', 'i2.png', 'i3.png', 'soundI1.m4a', 'soundI2.m4a', 'soundI3.m4a');
var letterJ = new letterObject('J j', 'j1.png', 'j2.png', 'j3.png', 'soundJ1.m4a', 'soundJ2.m4a', 'soundJ3.m4a');
var letterK = new letterObject('K k', 'k1.png', 'k2.png', 'k3.png', 'soundK1.m4a', 'soundK2.m4a', 'soundK3.m4a');
var letterL = new letterObject('L l', 'l1.png', 'l2.png', 'l3.png', 'soundL1.m4a', 'soundL2.m4a', 'soundL3.m4a');
var letterM = new letterObject('M m', 'm1.png', 'm2.png', 'm3.png', 'soundM1.m4a', 'soundM2.m4a', 'soundM3.m4a');
var letterN = new letterObject('N n', 'n1.png', 'n2.png', 'n3.png', 'soundN1.m4a', 'soundN2.m4a', 'soundN3.m4a');
var letterO = new letterObject('O o', 'o1.png', 'o2.png', 'o3.png', 'soundO1.m4a', 'soundO2.m4a', 'soundO3.m4a');
var letterP = new letterObject('P p', 'p1.png', 'p2.png', 'p3.png', 'soundP1.m4a', 'soundP2.m4a', 'soundP3.m4a');
var letterQ = new letterObject('Q q', 'q1.png', 'q2.png', 'q3.png', 'soundQ1.m4a', 'soundQ2.m4a', 'soundQ1.m4a');
var letterR = new letterObject('R r', 'r1.png', 'r2.png', 'r3.png', 'soundR1.m4a', 'soundR2.m4a', 'soundR3.m4a');
var letterS = new letterObject('S s', 's1.png', 's2.png', 's3.png', 'soundS1.m4a', 'soundS2.m4a', 'soundS3.m4a');
var letterT = new letterObject('T t', 't1.png', 't2.png', 't3.png', 'soundT1.m4a', 'soundT2.m4a', 'soundT3.m4a');
var letterU = new letterObject('U u', 'u1.png', 'u2.png', 'u3.png', 'soundU1.m4a', 'soundU2.m4a', 'soundU3.m4a');
var letterV = new letterObject('V v', 'v1.png', 'v2.png', 'v3.png', 'soundV1.m4a', 'soundV2.m4a', 'soundV3.m4a');
var letterW = new letterObject('W w', 'w1.png', 'w2.png', 'w3.png', 'soundW1.m4a', 'soundW2.m4a', 'soundW3.m4a');
var letterX = new letterObject('X x', 'x1.png', 'x2.png', 'x3.png', 'soundX1.m4a', 'soundX2.m4a', 'soundX1.m4a');
var letterY = new letterObject('Y y', 'y1.png', 'y2.png', 'y3.png', 'soundY1.m4a', 'soundY2.m4a', 'soundY3.m4a');
var letterZ = new letterObject('Z z', 'z1.png', 'z2.png', 'z3.png', 'soundZ1.m4a', 'soundZ2.m4a', 'soundZ3.m4a');
var letterÅ = new letterObject('Å å', 'aa1.png', 'aa2.png', 'aa3.png', 'soundAa1.m4a', 'soundAa2.m4a', 'soundAa3.m4a');
var letterÄ = new letterObject('Ä ä', 'ae1.png', 'ae2.png', 'ae3.png', 'soundAe1.m4a', 'soundAe2.m4a', 'soundAe3.m4a');
var letterÖ = new letterObject('Ö ö', 'oe1.png', 'oe2.png', 'oe3.png', 'soundOe1.m4a', 'soundOe2.m4a', 'soundOe3.m4a');

/* Variables for number objects */
var number0 = new numberObject('0', 'sound01.m4a');
var number1 = new numberObject('1', 'sound11.m4a');
var number2 = new numberObject('2', 'sound21.m4a');
var number3 = new numberObject('3', 'sound31.m4a');
var number4 = new numberObject('4', 'sound41.m4a');
var number5 = new numberObject('5', 'sound51.m4a');
var number6 = new numberObject('6', 'sound61.m4a');
var number7 = new numberObject('7', 'sound71.m4a');
var number8 = new numberObject('8', 'sound81.m4a');
var number9 = new numberObject('9', 'sound91.m4a');

/* Variables for elements */
var textAndre = document.querySelectorAll('#textAndre path');
var letterDisplay = document.getElementById('letterDisplay');
var alphabet = document.getElementById('alphabet');
var numberDisplay = document.getElementById('numberDisplay');
var numbers = document.getElementById('numbers');

/* Other variables */
var currentLetter;
var currentNumber;
var letterHTML;
var numberHTML;
var code;

/* Objects */
function letterObject(letterText, pic1, pic2, pic3, sound1, sound2, sound3) {
    this.letterText = letterText;
    this.pic1 = pic1;
    this.pic2 = pic2;
    this.pic3 = pic3;
    this.sound1 = sound1;
    this.sound2 = sound2;
    this.sound3 = sound3;
    this.index = 0;
} 

function numberObject(numberText, sound1) {
    this.numberText = numberText;
    this.sound1 = sound1;
}

$(document).ready(function() {
    /* Animation of game title, Andre */
    TweenMax.staggerFromTo(textAndre, 1, { alpha: 0, y: "-100" }, { alpha: 1, y: "20" }, 0.1);
    TweenMax.staggerFromTo(textAndre, 3, { drawSVG: "0%" }, { drawSVG: "100%" }, 0.1);

    /* Animation for soft scroll */
    /* If letter or number is choosen start display-function */
    $("a").on('click', function(event) {

        if (this.hash == '#letterDiv') {
                displayLetter(event.target.innerHTML);
        }
        else if (this.hash == '#numberDiv') {
                displayNumber(event.target.innerHTML);
        }
        else if (this.hash !== "") {
            // Prevent default anchor click behavior
            event.preventDefault();

            // Store hash
            var hash = this.hash;

            // Load unity after scroll
            if (this.hash == '#ball') {
                loadBallGame();
            }
            
            // Using jQuery's animate() method to add smooth page scroll
            // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area
            $('html, body').animate({
                scrollTop: $(hash).offset().top
            }, 800, function() {

                // Add hash (#) to URL when done scrolling (default click behavior)
                window.location.hash = hash;
            });
                // End all games if airballoon is hit
                if (this.hash == '#top') {
                    resetAll();
                }
        } // End if
    });
}); // End document.ready


// Function to close Letter display and focus the lettergame
function closeLetterDisplay() {
    letterDisplay.style.display ='none';
    alphabet.focus();
}

// Function to cose the number display and focus the numbergame
function closeNumberDisplay() {
    numberDisplay.style.display ='none';
    numbers.focus();
}

// Function to display letter image depending on internal counter
function displayLetter(letter) {
    currentLetter = this['letter'+letter];
    letterDisplay.style.display ='flex';
    letterDisplay.addEventListener('click', closeLetterDisplay);
    letterHTML='';
    switch (currentLetter.index) {
        case 0:
            letterHTML = '<div class="letterPicture">';
            letterHTML += currentLetter.letterText;
            letterHTML += '</div>';
            letterHTML += '<audio src="sound/'+currentLetter.sound1+'" autoplay></audio>';
            break;
        case 1:
            letterHTML = '<div class="letterPicture">';
            letterHTML += '<img src="picture/'+currentLetter.pic1+'">';
            letterHTML += '</div>';
            letterHTML += '<audio src="sound/'+currentLetter.sound1+'" autoplay></audio>';
            break;
        case 2:
            letterHTML = '<div class="letterPicture">';
            letterHTML += '<img src="picture/'+currentLetter.pic2+'">';
            letterHTML += '</div>';
            letterHTML += '<audio src="sound/'+currentLetter.sound2+'" autoplay></audio>';
            break;
        case 3:
            letterHTML = '<div class="letterPicture">';
            letterHTML += '<img src="picture/'+currentLetter.pic3+'">';
            letterHTML += '</div>';
            letterHTML += '<audio src="sound/'+currentLetter.sound3+'" autoplay></audio>';
            break;
    } // end switch
    
    letterDisplay.innerHTML = letterHTML;
    currentLetter.index++;
    if (currentLetter.index > 3) {
        currentLetter.index=0;
    } // end if

} // end function displayLetter()

// Function to display number image
function displayNumber(number) {
    numberHTML = '';
    currentNumber = this['number'+number];
    numberDisplay.style.display ='flex';
    numberDisplay.addEventListener('click', closeNumberDisplay);
    numberHTML = '<div class="numberPicture">';
    numberHTML += currentNumber.numberText;
    numberHTML += '</div>';
    numberHTML += '<audio src="sound/'+currentNumber.sound1+'" autoplay></audio>';
    numberDisplay.innerHTML = numberHTML;
} // end function displayNumber()

// Listener for all letter keys on the keyboard
alphabet.onkeyup = function(e) {
    code = (e.keyCode ? e.keyCode : e.which);
    switch (code) {
        case 65:
        displayLetter('A');
        break;
        case 66:
        displayLetter('B');
        break;
        case 67:
        displayLetter('C');
        break; 
        case 68:
        displayLetter('D');
        break;            
        case 69:
        displayLetter('E');
        break;             
        case 70:
        displayLetter('F');
        break;
        case 71:
        displayLetter('G');
        break;
        case 72:
        displayLetter('H');
        break; 
        case 73:
        displayLetter('I');
        break;            
        case 74:
        displayLetter('J');
        break;             
        case 75:
        displayLetter('K');
        break;
        case 76:
        displayLetter('L');
        break;
        case 77:
        displayLetter('M');
        break; 
        case 78:
        displayLetter('N');
        break;            
        case 79:
        displayLetter('O');
        break;             
        case 80:
        displayLetter('P');
        break;
        case 81:
        displayLetter('Q');
        break;
        case 82:
        displayLetter('R');
        break; 
        case 83:
        displayLetter('S');
        break;            
        case 84:
        displayLetter('T');
        break;  
        case 85:
        displayLetter('U');
        break;
        case 86:
        displayLetter('V');
        break;
        case 87:
        displayLetter('W');
        break; 
        case 88:
        displayLetter('X');
        break;            
        case 89:
        displayLetter('Y');
        break;             
        case 90:
        displayLetter('Z');
        break;
        case 219:
        case 221:
        displayLetter('Å');
        break;
        case 222:
        displayLetter('Ä');
        break; 
        case 186:
        case 192:
        displayLetter('Ö');
        break;              
        default:
    } // end switch
}; // end alphabet.onkeyup

// Listener for all number-keys on the keyboard
numbers.onkeyup = function(e) {
    code = (e.keyCode ? e.keyCode : e.which);
    switch (code) {
        case 49:
        displayNumber('1');
        break;
        case 50:
        displayNumber('2');
        break;
        case 51:
        displayNumber('3');
        break;
        case 52:
        displayNumber('4');
        break;
        case 53:
        displayNumber('5');
        break;
        case 54:
        displayNumber('6');
        break;
        case 55:
        displayNumber('7');
        break;
        case 56:
        displayNumber('8');
        break;
        case 57:
        displayNumber('9');
        break;            
        case 48:
        displayNumber('0');
        break; 
        default:
    } // end switch
}; // end numbers.onkeyup

// set focus on the alphabet game
alphabet.onload = function() {
    alphabet.focus();
};

// set focus on the numbers game
numbers.onload = function() {
    numbers.focus();
};

// reset all games
function resetAll() {
        closeLetterDisplay();
        closeNumberDisplay();
        alphabet.blur();
        numbers.blur();
        endBallGame();
}

// Load ball game - load scripts for Unity
function loadBallGame() {
    ball.style.display = 'flex';
    // show spinner
    spinnerHTML = '<div class="spinnerPicture">';
    spinnerHTML += 'Vänta';
    spinnerHTML += '</div>';
    waitText.innerHTML = spinnerHTML;

    $.getScript( "TemplateData/UnityProgress.js" )
        .done(function( script, textStatus ) {
        console.log( textStatus );
    });

    $.getScript( "Build/UnityLoader.js" )
        .done(function( script, textStatus ) {
        console.log( textStatus );
            var gameInstance = UnityLoader.instantiate("gameContainer", "Build/Ball.json", {onProgress: UnityProgress});
            // remove spinner show game
        waitText.style.display ='none';
    });

}

// End ball game
function endBallGame() {
        ball.style.display ='none';
}
    

    